<head>
  <meta charset="utf-8">
  <title>{{ .Title }}</title>

  {{ "<!-- mobile responsive meta -->" | safeHTML }}
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ with site.Params.description }}{{ . }}{{ end }}{{ end }}">
  {{ with site.Params.author }}<meta name="author" content="{{ . }}">{{ end }}
  {{ hugo.Generator }}
  
  <!-- theme meta -->
  <meta name="theme-name" content="vex-hugo" />

  {{ "<!-- plugins -->" | safeHTML }}
  {{ range site.Params.plugins.css }}
  <link rel="stylesheet" href="{{ .link | absURL }} ">
  {{ end }}

  {{ "<!-- Main Stylesheet -->" | safeHTML }}
  {{ $scssFile := "scss/style.scss" }}
  {{ $scssOptions := (dict "outputStyle" "compressed") }}
  {{ $stylesheet := "" }} {{/* Initialize $stylesheet */}}

  {{ $originalResource := resources.Get $scssFile }}

  {{/* --- DEBUGGING BLOCK START --- */}}
  {{ if $originalResource }}
    {{ warnf "DEBUG head.html: Found $originalResource. Name: %s, Type: %T, MediaType: %s, Content Length: %d" $originalResource.Name (printf "%T" $originalResource) $originalResource.MediaType (len $originalResource.Content) }}
    {{/* Let's try to see if .RelPermalink exists on $originalResource directly, indicating it's some kind of file */}}
    {{ warnf "DEBUG head.html: $originalResource.Permalink: %s" $originalResource.Permalink }}
    {{ warnf "DEBUG head.html: $originalResource.RelPermalink: %s" $originalResource.RelPermalink }}
  {{ else }}
    {{ warnf "DEBUG head.html: $originalResource for %s is NIL." $scssFile }}
  {{ end }}
  {{/* --- DEBUGGING BLOCK END --- */}}


  {{ if $originalResource }}
    {{ if ne $originalResource.Content "" }} {{/* Check if content is not empty */}}
      {{ $processedStyles := resources.Sass $originalResource $scssOptions }}
      {{ $stylesheet = $processedStyles }} {{/* Temporarily skip Minify */}}
      <link rel="stylesheet" href="{{ $stylesheet.Permalink }}" media="screen">
    {{ else }}
      {{ warnf "SCSS resource assets/scss/style.scss is empty when processed in layouts/partials/head.html. (Content check)" }}
    {{ end }}
  {{ else }}
    {{ warnf "SCSS resource assets/scss/style.scss not found when processed in layouts/partials/head.html. (Resource check)" }}
  {{ end }}

  {{ "<!--Favicon-->" | safeHTML }}
  <link rel="shortcut icon" href="{{ `images/favicon.png` | absURL }} " type="image/x-icon">
  <link rel="icon" href="{{ `images/favicon.png` | absURL }} " type="image/x-icon">

  {{ with .Params.image }}
  <meta property="og:image" content="{{ . | absURL }}" />
  {{ end }}
  {{ template "_internal/opengraph.html" . }}
  {{ template "_internal/google_analytics.html" . }}

</head>
